services:
  buddy-sandbox:
    build:
      context: .
      dockerfile: Dockerfile.buddy-sandbox
    container_name: buddy-sandbox
    restart: always
    volumes:
      - buddy-data:/agent/data
      - buddy-knowledge:/agent/knowledge
    # Bridge network for outbound internet access (YouTube APIs, etc.)
    network_mode: bridge
    deploy:
      resources:
        limits:
          memory: 512M
          cpus: '1.0'
    # Run as non-root
    user: "1000:1000"

volumes:
  buddy-data:
  buddy-knowledge:
